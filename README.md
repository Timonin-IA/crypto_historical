# Анализ исторических доходностей криптовалют

### Крактое описание
Cбор недельных снапшотов CoinMarketCap (с 2013 г.) через веб-скрейпинг, формирование общего датафрейма и предварительная бработка данных для построения капитализационно-взвешенного индекса и экспериментов с альтернативными весами.
#### Технический стек
Python, pandas, requests, beautifulsoup4, selenium (webdriver), Jupyter Notebook

### Цели проекта

1. Собрать исторические еженедельные снэпшоты CoinMarketCap (каждое воскресенье) с 2013 года.
2. Построить капитализационно-взвешенный индекс топ‑тикеров (аналог S&P500 / IMOEX).
3. Исследовать гипотезу: можно ли улучшить среднегодовую доходность индекса, учитывая «фазу жизненного цикла» проектов (время входа в индекс, скорость роста капитализации, кратность роста и т.п.) при формировании весов.


### Источник данных

CoinMarketCap — публичные страницы исторических снапшотов: _https: //coinmarketcap.com/historical/YYYYMMDD/_
Примечание: API в бесплатном доступе не даёт требуемых исторических таблиц, поэтому используется веб-скрейпинг снапшотов.

### Проблемы в процессе и детали реализации

- Периодичность данных: еженедельно (каждое воскресенье). В примере посчитано ~613 снапшотов (на дату запуска кода).
- Учет исторической неоднородности таблиц: в первых 34 снапшотах отсутствовал столбец объемов — он заполняется нулями.
- Между запросами ставятся случайные паузы (2–25 с) для уменьшения нагрузки на целевой сайт и имитации человеческого поведения.
- Каждый снапшот сохраняется отдельно — это позволяет возобновлять сбор при сбоях.
- Объединение файлов в один DataFrame добавляет колонку date (из имени файла).

### Примечания

- Полный сбор ~600+ снапшотов занимает несколько часов (в ноутбуке оценивалось ~5 часов).
- Для разработки можно запускать небольшой диапазон (например 2–10 снапшотов).

### Выходные данные

all_data/*.json — по одному файлу на снапшот  
all_data/all_data.json — объединённый файл со всеми записями  

### Как запустить

1. Установить ChromeDriver и необходимые зависимости, указать путь в скрипте (в ноутбуке — /usr/bin/chromedriver).
2. Запускать notebook поячеячно.

### Ограничения и рекомендации

Веб-скрейпинг может нарушать условия обслуживания сайта — для долгосрочных/промышленных задач используйте официальный API CoinMarketCap (если доступен) или согласуйте сбор данных с владельцем ресурса.
При росте числа запросов или изменении верстки сайта потребуется доработка парсера.
    
### Возможные улучшения

- мониторинг ошибок и логирование,
- обработку и парсинг валютных строк в числа (удаление $ , * , тикеров и т.п.),
- нормализацию названий (разделить Name и тикер, убрать дубли).

### Дальнейшие шаги (аналитика)

- Построение капитализационно-взвешенного индекса по каждому снэпшоту.
- Эксперименты с альтернативными схемами весов (учёт времени входа, скорости роста капитализации, кратности роста).
- Оценка доходностей (среднегодовая доходность, волатильность, максимальная просадка) и сравнение с бенчмарком.
- Визуализация результатов и backtest стратегий изменения весов.

### Вопросы / доработка

Проект — исследовательский прототип. По вопросам доработки и вопросам по коду — откройте issue в репозитории или свяжитесь с автором (контакты в профиле проекта).
